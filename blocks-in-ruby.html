<!DOCTYPE html>
<html class="no-js" lang="ru">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Блоки в Ruby</title>
<meta content="Сходство и отличие блоков и методов в Ruby, почему блок является замыканием, примеры использования блоков.
" name="description">
<meta content="2011, Andriy Malyshko, http://nashbridges.me" name="author">
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<link href="/favicon.png" rel="shortcut icon" type="image/png">
<link href="/stylesheets/site.css" rel="stylesheet">
<script src="http://yandex.st/modernizr/1.7/modernizr.min.js"></script>
</head>
<body><div class="page-container">
<header></header><article><h1>Блоки в Ruby</h1>

<section class="metadata"><p>сложность материала: для начинающих</p>

  <p>версия Ruby: 1.9</p>

  <p>необходимые знания: класс, переменные и методы экземпляра класса,
  интерполяция строк, консоль irb</p>
</section><p>Блок является одной из ключевых конструкций языка Ruby, которую необходимо
хорошо понимать и любить, поскольку использование блоков, наряду с грамотным
именованием всех идентификаторов (переменных и т. д.) и вызовами методов
по цепочке, делает ваш код читаемым настолько, насколько может быть читаема
хорошая инструкция на английском.</p>

<section><h2>Когда возникает необходимость в блоках?</h2>

  <p>Представим, вы создали простой класс, описывающий гладиатора:</p>

  <pre><code class="slush_poppies"><span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Comment<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Comment<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Comment"><span class="Comment">#</span>&lt;/span&gt; gladiator.rb&lt;/span&gt;</span>

<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">class</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Variable">Gladiator</span>
  <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">attr</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>UserDefinedConstant<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>UserDefinedConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>name<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>

  <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span>def<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">initialize</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>(<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Variable<span class="String">"</span></span><span class="Operators">&gt;</span>name<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>)
    <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Variable<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Variable<span class="String">"</span></span><span class="Operators">&gt;</span>@<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>name<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;=</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> name
  <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">end</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>

  <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span>def<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>say_hello<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
    puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Поклон тебе, Цезарь!&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
    puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Идущие на смерть приветствуют тебя!&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
  <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">end</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>

<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Comment<span class="String">"</span></span><span class="Operators">&gt;</span>  <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Comment<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Comment"><span class="Comment">#</span>&lt;/span&gt; остальное опустим для краткости&lt;/span&gt;</span>
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Comment<span class="String">"</span></span><span class="Operators">&gt;</span>  <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Comment<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Comment"><span class="Comment">#</span>&lt;/span&gt; ...&lt;/span&gt;</span>
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">end</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
</code></pre>

  <p>Пример использования:</p>

  <div class="with-notes">
    <pre><code class="slush_poppies"><span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">001</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">require</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;./gladiator&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">002</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> spartak <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;=</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>LibraryClassType<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Variable">Gladiator</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>.<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">new</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>(<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Спартак&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>)
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">003</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> spartak.<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>say_hello<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
Поклон тебе, Цезарь!
Идущие на смерть приветствуют тебя!
 =&gt; <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>BuiltInConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="BuiltInConstant">nil</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
</code></pre>

    <aside><p>Точка в <code>require</code> говорит Ruby о том, что файл надо искать в текущем
  каталоге.</p>
    </aside>
</div>

  <p>Допустим также, что он настолько понравился коллегам-программистам,
что те решили использовать его в своих проектах. Спустя некоторое время
начали приходить письма с просьбами и предложениями. Возьмем, например, это,
из некой страховой компании, где возникла необходимость синхронизовать свою
логику с вашей вот так:</p>

  <pre><code class="slush_poppies"><span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span>def<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>say_hello<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
  puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Поклон тебе, Цезарь!&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>

<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Comment<span class="String">"</span></span><span class="Operators">&gt;</span>  <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Comment<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Comment"><span class="Comment">#</span>&lt;/span&gt; процедура составления завещания&lt;/span&gt;</span>
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Comment<span class="String">"</span></span><span class="Operators">&gt;</span>  <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Comment<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Comment"><span class="Comment">#</span>&lt;/span&gt; ...&lt;/span&gt;</span>

  puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Идущие на смерть приветствуют тебя!&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">end</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
</code></pre>

  <p>Сейчас они смастерили свой <code>say_hello</code>, добавив туда
вызов метода, отвечающий за завещания. Но… это же чертовски неправильно!
<code>say_hello</code> должен, натурально, говорить «хэллоу» и больше ничего. И вообще, это
не забота гладиатора, составлять завещания, его дело воевать.</p>

  <p>Пока вы думаете над проблемой, приходит еще одно письмо, на этот раз от программистов
из самого Pixar! По странному стечению обстоятельств им понадобилось такое:</p>

  <pre><code class="slush_poppies"><span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span>def<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>say_hello<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
  puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Поклон тебе, Цезарь!&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>

<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Comment<span class="String">"</span></span><span class="Operators">&gt;</span>  <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Comment<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Comment"><span class="Comment">#</span>&lt;/span&gt; запустить анимацию наклона персонажа вперед&lt;/span&gt;</span>
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Comment<span class="String">"</span></span><span class="Operators">&gt;</span>  <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Comment<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Comment"><span class="Comment">#</span>&lt;/span&gt; ...&lt;/span&gt;</span>

  puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Идущие на смерть приветствуют тебя!&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">end</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
</code></pre>

  <p>Вот было бы хорошо позволить выполнение чужого кода внутри своего
метода! И при этом не задумываться, за что он будет отвечать и насколько сложен.</p>

  <p>Как раз для этого в Ruby используют блоки.</p>
</section><section><h2>Что такое блок?</h2>

  <p>Блок — это произвольный код, который можно передать <em>любому</em> методу в качестве неявного
последнего аргумента. Следует понимать, что при этом блок является особой конструкцией
языка и обособлен от списка явных аргументов метода, что означает следующее:</p>

  <ul>
<li>методу можно передать только один блок;</li>
    <li>он всегда идет в самом конце и вынесен за скобки с аргументами (если они есть);</li>
    <li>его можно задать при вызове любого метода, независимо от того, указаны в
определении метода аргументы или нет.</li>
  </ul>
<p>Код может находиться внутри фигурных скобок <code>{ }</code>
или ключевых слов <code>do end</code>. Рекомендации гласят, что первые
стоит использовать, если код блока вместе с именем метода помещается
на одной строке (вопрос стиля и вкуса, с точки зрения языка эти конструкции
равнозначны).</p>

  <p>Посмотрим, как это выглядит на практике:</p>

  <div class="with-notes">
    <pre><code class="slush_poppies"><span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">004</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> spartak.<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>say_hello<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> { puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Отпустите меня домой&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> }
Поклон тебе, Цезарь!
Идущие на смерть приветствуют тебя!
 =&gt; <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>BuiltInConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="BuiltInConstant">nil</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
</code></pre>

    <aside><p>Вас не раздражает этот <code>nil</code> в конце? Его возвращает метод <code>puts</code>.</p>
    </aside>
</div>

  <p>Как видим, Ruby совершенно не возражает, что мы добавили к методу блок, хотя сам
метод ничего о нем не знает! При этом метод выполнился без изменений.
Что, если записать выражение иначе?</p>

  <pre><code class="slush_poppies"><span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">005</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> spartak.<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>say_hello<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">do</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">006</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>   puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Отпустите меня домой&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">007</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Number">?&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">end</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
Поклон тебе, Цезарь!
Идущие на смерть приветствуют тебя!
 =&gt; <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>BuiltInConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="BuiltInConstant">nil</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
</code></pre>

  <p>Абсолютно никакой разницы. Но какой толк от блока, который не выполняется?</p>
</section><section><h2>Передача контроля блоку</h2>

  <p>Существует два способа выполнить код блока, переданный методу. В этой статье
рассматривается только один из них — ключевое слово <code>yield</code>.</p>

  <p><code>yield</code> — это часть синтаксиса языка, как и объявление блока (поэтому
ее нельзя переопределить). Когда в теле метода мы вызываем <code>yield</code>, то
подразумеваем следующее: «отдай управление блоку, а когда тот закончит, верни
управление этому методу».</p>

  <p>Попробуйте переписать приветствующий метод так:</p>

  <pre><code class="slush_poppies"><span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">class</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Variable">Gladiator</span>
  <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span>def<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>say_hello<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
    puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Поклон тебе, Цезарь!&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
    <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">yield</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
    puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Идущие на смерть приветствуют тебя!&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
  <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">end</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">end</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
</code></pre>

  <p>и еще одна попытка передать блок:</p>

  <pre><code class="slush_poppies"><span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">003</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> spartak.<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>say_hello<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> { puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;То, что мы делаем в жизни, отзывается в вечности.&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> }
Поклон тебе, Цезарь!
То, что мы делаем в жизни, отзывается в вечности.
Идущие на смерть приветствуют тебя!
 =&gt; <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>BuiltInConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="BuiltInConstant">nil</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
</code></pre>

  <p>Вуаля! Теперь все надоедливые товарищи могут пихать в этот блок, что захочется, и
не мешать вам жить. Ура? Не совсем: попробуйте вызвать метод без блока.</p>

  <pre><code class="slush_poppies"><span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">004</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> spartak.<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>say_hello<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Variable<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Variable">LocalJumpError</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>: no block given (<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">yield</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>)
</code></pre>

  <p>Ошибка! Ruby теперь в обязательном порядке требует от нас блок! В некоторых
случаях без блока действительно никак, но чаще всего логика метода вполне
позволяет обойтись без него, как в этом случае. Поэтому перед вызовом
беспощадного <code>yield</code> следует удостовериться, а есть ли блок, с помощью метода
<code>block_given?</code>:</p>

  <pre><code class="slush_poppies"><span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span>def<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>say_hello<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
  puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Поклон тебе, Цезарь!&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
  <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">yield</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">if</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">block_given?</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
  puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Идущие на смерть приветствуют тебя!&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">end</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>

<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">003</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> spartak.<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>say_hello<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
Поклон тебе, Цезарь!
Идущие на смерть приветствуют тебя!
 =&gt; <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>BuiltInConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="BuiltInConstant">nil</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
</code></pre>
</section><section><h2>Обмен информацией с блоком</h2>

  <p>Только вы расслабились, как ребята из страховой компании стучатся с новой
проблемой. Им нужно вписать в завещание имя гладиатора, но решение «в лоб» не
работает:</p>

  <div class="with-notes">
    <pre><code class="slush_poppies"><span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">003</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> spartak.<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>say_hello<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">do</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">004</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>   puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;ЗАВЕЩАНИЕ&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">005</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Number">?&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>   puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Я, &lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String"><span class="String">#{</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>name<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String">}</span></span>&lt;/span&gt;&lt;/span&gt;, настоящим завещаю&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">006</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Number">?&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">end</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
Поклон тебе, Цезарь!
ЗАВЕЩАНИЕ
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Variable<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Variable">NameError</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>: undefined local variable <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Operators">or</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> method <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">'</span>&lt;/span&gt;name&lt;span class="String"&gt;<span class="String">'</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">for</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> main<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>UserDefinedConstant<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>UserDefinedConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Variable">Object</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
</code></pre>

    <aside><p>В реальном коде они используют вывод в файл, а не консоль.</p>
    </aside>
</div>

  <p>Почему так произошло, несмотря на то, что метод <code>name</code> у класса <code>Gladiator</code>
определен? Дело в том, что хотя блок и вызывается
непосредственно в методе, ему недоступны ни локальные переменные
этого метода (<code>say_hello</code>), ни атрибуты объекта (<code>spartak</code>), метод которого вызывается.</p>

  <p>Эту проблему можно решить несколькими способами. Первый — явно передать блоку
ту информацию, в которой он может нуждаться. Например, предоставить
ему имя гладиатора:</p>

  <pre><code class="slush_poppies"><span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span>def<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>say_hello<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
  puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Поклон тебе, Цезарь!&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
  <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">yield</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>(name) <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">if</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">block_given?</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
  puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Идущие на смерть приветствуют тебя!&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">end</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
</code></pre>

  <p>Зная об этом, страховщики теперь могут писать:</p>

  <pre><code class="slush_poppies"><span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">003</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> spartak.<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>say_hello<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">do </span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Operators">|</span><span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Variable<span class="String">"</span></span><span class="Operators">&gt;</span>gladiator_name<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Operators">|</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">004</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>   puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;ЗАВЕЩАНИЕ&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">005</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Number">?&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>   puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Я, &lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String"><span class="String">#{</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>gladiator_name<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String">}</span></span>&lt;/span&gt;&lt;/span&gt;, настоящим завещаю&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">006</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Number">?&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">end</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
Поклон тебе, Цезарь!
ЗАВЕЩАНИЕ
Я, Спартак, настоящим завещаю
Идущие на смерть приветствуют тебя!
 =&gt; <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>BuiltInConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="BuiltInConstant">nil</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
</code></pre>

  <p>Чтобы хорошо понять, что тут только что произошло, советую провести для себя
некоторые параллели между блоком и методом. Забегая наперед, скажу, что блок
<em>не является</em> методом, но это не мешает увидеть, что между ними есть много общего.</p>

  <p>У метода есть имя. Назвали имя — вызвали код, описанный в определении метода.
Назвали <code>yield</code> — вызвали код, описанный в блоке.</p>

  <div class="with-notes">
    <p>Метод можно вызывать с аргументами, которые указывают через запятую после его
имени. Как видно из последнего примера, <code>yield</code> тоже можно вызывать с
аргументами. И было бы логичным ожидать, что в самом блоке нужно как-то указать
перечень принимаемых аргументов.</p>
    <aside><p>В простых ситуациях Ruby прощает отсутствие скобок вокруг аргументов, что
  передаются методу.</p>
    </aside>
</div>

  <p>Ожидания оправдываются во всём, кроме синтаксиса: вместо круглых скобок, как в
методе, аргументы блока следует брать в прямые <code>| |</code>. После того, как аргумент объявлен,
можно обращаться к нему в блоке, как к локальной переменной. Список
аргументов записывается сразу после <code>do</code> (или <code>{</code>),
перенос строки после него не обязателен.</p>

  <p>Продолжим аналогию. Метод всегда возвращает значение: это или
значение последнего выражения, или значение выражения после ключевого
слова <code>return</code>. Блок тоже возвращает значение, и его можно получить в
методе как результат вызова <code>yield</code>.</p>

  <p>Пусть наш салютующий метод теперь выглядит так:</p>

  <pre><code class="slush_poppies"><span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span>def<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>say_hello<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
  puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Поклон тебе, Цезарь!&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
  <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">if</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">block_given?</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Comment<span class="String">"</span></span><span class="Operators">&gt;</span>    <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Comment<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Comment"><span class="Comment">#</span>&lt;/span&gt; монетка бросается в блоке&lt;/span&gt;</span>
    coin_flip <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;=</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">yield</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>(name)
    <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">if</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> coin_flip <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;=</span><span class="Operators">=</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">1</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Comment<span class="String">"</span></span><span class="Operators">&gt;</span>      <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Comment<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Comment"><span class="Comment">#</span>&lt;/span&gt; выпал аверс&lt;/span&gt;</span>
      puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Похоже, мне повезет в этой битве.&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
    <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">else</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
      puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Смерть улыбается всем нам.&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
    <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">end</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
  <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">end</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
  puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Идущие на смерть приветствуют тебя!&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">end</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
</code></pre>

  <p>а его вызов с блоком — так:</p>

  <div class="with-notes">
    <pre><code class="slush_poppies"><span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">003</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> spartak.<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>say_hello<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">do </span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Operators">|</span><span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Variable<span class="String">"</span></span><span class="Operators">&gt;</span>gladiator_name<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Operators">|</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">004</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>   puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;-&gt; &lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String"><span class="String">#{</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>gladiator_name<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String">}</span></span>&lt;/span&gt;&lt;/span&gt; бросает монетку&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">005</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Number">?&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>   <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>rand<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>(<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">2</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>)
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">006</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Number">?&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">end</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
Поклон тебе, Цезарь!
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Operators">-</span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> Спартак бросает монетку
Похоже, мне повезет в этой битве.
Идущие на смерть приветствуют тебя!
 =&gt; <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>BuiltInConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="BuiltInConstant">nil</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
</code></pre>

    <aside><p>Метод <code>rand</code> случайно генерирует 0 или 1. На этот раз Спартаку повезло.</p>
    </aside>
</div>

  <p>Есть у блока с методом еще одно общее свойство: оба они создают новую локальную область
видимости переменных. Другими словами, переменная, объявленная внутри них,
недоступна в других участках выполняемого кода.</p>

  <div class="with-notes">
    <pre><code class="slush_poppies"><span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">001</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span>def<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>nonsense<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">002</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Number">?&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>   inside_method <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;=</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Я существую только внутри метода.&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">003</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Number">?&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>   <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">yield</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">if</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">block_given?</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">004</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Number">?&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">end</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
 =&gt; <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>BuiltInConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="BuiltInConstant">nil</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">005</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> nonsense
 =&gt; <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>BuiltInConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="BuiltInConstant">nil</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">006</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> puts inside_method
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Variable<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Variable">NameError</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>: undefined local variable <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Operators">or</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> method <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">'</span>&lt;/span&gt;inside_method&lt;span class="String"&gt;<span class="String">'</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">for</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> main<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>UserDefinedConstant<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>UserDefinedConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Variable">Object</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">007</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> nonsense { inside_block <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;=</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;А я — только внутри блока.&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> }
 =&gt; <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;А я — только внутри блока.&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">008</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> puts inside_block
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Variable<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Variable">NameError</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>: undefined local variable <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Operators">or</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> method <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">'</span>&lt;/span&gt;inside_block&lt;span class="String"&gt;<span class="String">'</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">for</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> main<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>UserDefinedConstant<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>UserDefinedConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Variable">Object</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
</code></pre>

    <aside><p>Тут и далее код, не связанный с классом <code>Gladiator</code>.</p>

      <p>Я вызвал <code>nonsense</code>, чтобы гарантировать создание переменной
  <code>inside_method</code> и показать, что она существует только в момент выполнения метода.</p>
    </aside>
</div>

  <p>Обратите внимание на то, как значение присвоения переменной <code>inside_block</code>
было последовательно возвращено блоком в метод, а затем — самим методом. Впрочем,
это всё равно не сделало саму переменную видимой вне блока.</p>
</section><section><h2>Почему блок нельзя считать анонимным методом?</h2>

  <section><h3>Внешние переменные</h3>

    <p>Основное и принципиальное отличие блока от метода в том, что первый имеет доступ
к переменным, объявленным до него во внешнем окружении.
Теперь вернитесь на пару абзацев назад и подумайте, не отрицает ли это сказанное
выше про локальную область видимости, которую создает блок?</p>

    <p>Оказывается, нет. Даже если внутри блока происходит присвоение переменной, ранее
объявленной не в этом блоке, Ruby не создает локальную переменную, а позволяет
присвоить внешней переменной новое значение.</p>

    <div class="with-notes">
      <pre><code class="slush_poppies"><span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">001</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> cat <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;=</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Голодный кот&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
 =&gt; <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Голодный кот&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">002</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span>def<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>locate_cat<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">003</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Number">?&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>   puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Кажется, &lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String"><span class="String">#{</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>cat<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String">}</span></span>&lt;/span&gt;&lt;/span&gt; на крыше.&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">004</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Number">?&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">end</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
 =&gt; <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>BuiltInConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="BuiltInConstant">nil</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">005</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> locate_cat
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Variable<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Variable">NameError</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>: undefined local variable <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Operators">or</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> method <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">'</span>&lt;/span&gt;cat&lt;span class="String"&gt;<span class="String">'</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">for</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> main<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>UserDefinedConstant<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>UserDefinedConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Variable">Object</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">006</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span>def<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>whatever<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">007</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Number">?&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>   <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">yield</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">008</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Number">?&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">end</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
 =&gt; <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>BuiltInConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="BuiltInConstant">nil</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">009</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> whatever <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">do</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">010</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>   puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String"><span class="String">#{</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>cat<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String">}</span></span>&lt;/span&gt;&lt;/span&gt; добрался до колбасы!&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">011</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Number">?&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>   cat <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;=</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Уже не голодный кот&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">012</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Number">?&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">end</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
Голодный кот добрался до колбасы!
 =&gt; <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Уже не голодный кот&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">013</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> puts cat
Уже не голодный кот
 =&gt; <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>BuiltInConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="BuiltInConstant">nil</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
</code></pre>

      <aside><p>Метод <code>whatever</code> имеет исключительно академическое значение,
  поскольку занимается только тем, что выполняет любой переданный ему блок.</p>

        <p>Смотрите, как переменная <code>cat</code> «просачивается» внутрь блока и даже меняет
  свое значение.</p>
      </aside>
</div>

    <p>При этом нужно понимать, что блок не может магическим образом видеть <em>все</em>
переменные вне себя. Его способностей хватает только на те, которые
находятся с ним на одном уровне, т. е. не скрыты от него внутри других методов
или блоков, и объявлены на момент выполнения блока.</p>

    <pre><code class="slush_poppies"><span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">014</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> whatever { dog <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;=</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Ленивый пёс&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> }
 =&gt; <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Ленивый пёс&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">015</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> whatever { puts dog }
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Variable<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Variable">NameError</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>: undefined local variable <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Operators">or</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> method <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">'</span>&lt;/span&gt;dog&lt;span class="String"&gt;<span class="String">'</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">for</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> main<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>UserDefinedConstant<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>UserDefinedConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Variable">Object</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
</code></pre>

    <p>Теперь, если вернуться к раннему примеру с завещанием для
гладиатора, можно догадаться, как решить проблему с его именем, не используя
аргументы блока:</p>

    <div class="with-notes">
      <pre><code class="slush_poppies"><span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">003</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> spartak.<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>say_hello<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">do</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">004</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>   puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;ЗАВЕЩАНИЕ&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">005</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Number">?&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>   puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Я, &lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String"><span class="String">#{</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>spartak<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String">.</span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>name<span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String">}</span></span>&lt;/span&gt;&lt;/span&gt;, настоящим завещаю&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">006</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Number">?&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">end</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
</code></pre>

      <aside><p>Поскольку переменная <code>spartak</code> объявлена до выполнения блока, совершенно
  не зазорно использовать ее внутри.</p>
      </aside>
</div>
  </section><section><h3>Столкновение переменных</h3>

    <p>Что произойдет, если имя аргумента блока совпадает с внешней переменной? В этом
случае Ruby создаст новую локальную переменную, и внешняя
переменная внутри блока будет недоступна.</p>

    <pre><code class="slush_poppies"><span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">001</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span>def<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>with_one<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">002</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Number">?&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>   <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">yield</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>(<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">1</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>)
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">003</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Number">?&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">end</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">004</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> number <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;=</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">99</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">005</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> with_one { |&lt;<span class="Variable">span</span> <span class="Variable">class</span>="<span class="Variable">Variable</span>"&gt;<span class="Variable">number</span>&lt;/<span class="Variable">span</span>&gt;| puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;number равно &lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String"><span class="String">#{</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>number<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String">}</span></span>&lt;/span&gt;&lt;/span&gt;&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> }
number равно <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">1</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
 =&gt; <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>BuiltInConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="BuiltInConstant">nil</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">006</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> puts number
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">99</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
 =&gt; <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>BuiltInConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="BuiltInConstant">nil</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
</code></pre>

    <p>Наконец, а что делать, если вы хотите, чтобы блок <em>не</em> захватывал внутри и
менял внешнюю переменную? Для этого нужно в принудительном порядке создать
одноименную локальную переменную блока, делается это ее указанием после точки
с запятой в списке аргументов:</p>

    <div class="with-notes">
      <pre><code class="slush_poppies"><span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">006</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> puts number
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">99</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
 =&gt; <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>BuiltInConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="BuiltInConstant">nil</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">007</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> with_one <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">do </span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Operators">|</span><span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Variable<span class="String">"</span></span><span class="Operators">&gt;</span>i<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>; <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Variable<span class="String">"</span></span><span class="Operators">&gt;</span>number<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Operators">|</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">008</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>   puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;i равно &lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String"><span class="String">#{</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>i<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String">}</span></span>&lt;/span&gt;&lt;/span&gt;&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">009</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Number">?&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>   number <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;=</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">123</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">010</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Number">?&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">end</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
i равно <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">1</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
 =&gt; <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">123</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">011</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> puts number
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">99</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
 =&gt; <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>BuiltInConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="BuiltInConstant">nil</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
</code></pre>

      <aside><p><code>with_one</code> по-прежнему передает в блок единицу.</p>
      </aside>
</div>
  </section><section><h3>Как это использовать?</h3>

    <p>Поначалу может показаться, что всё это жадное «захватывание» переменных блоком
(поэтому блоки еще называют <em>замыканиями</em>) не имеет никакого смысла,
если не хуже — представляет опасность: можно очень легко изменить
переменную, полагая, что работаешь с ней только внутри блока.</p>

    <p>На самом деле,
практическое применение замыканий становится понятным, только когда их
начинают <em>перемещать между областями видимости</em>, что выходит за рамки данной
статьи. Поэтому пока что стоит принять на веру, что замыкание — полезная штука,
если работать с ней аккуратно.</p>
  </section><section><h3>Как метод и блок считают аргументы</h3>

    <p>В этом еще одно отличие: метод слишком ворчливый и дотошный, он требует строгого
соответствия заявленного и предоставленного количества аргументов. Блок же
закрывает глаза на недостачу и даже на избыток аргументов!</p>

    <div class="with-notes">
      <pre><code class="slush_poppies"><span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">001</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span>def<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>feed_crocodile<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>(<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Variable<span class="String">"</span></span><span class="Operators">&gt;</span>name<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>)
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">002</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Number">?&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>   puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Сейчас будем кормить крокодила &lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String"><span class="String">#{</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>name<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String">}</span></span>&lt;/span&gt;&lt;/span&gt;&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">003</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Number">?&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>   <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">yield</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>(name) <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">if</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">block_given?</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">004</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Number">?&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">end</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
 =&gt; <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>BuiltInConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="BuiltInConstant">nil</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">005</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>feed_crocodile<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>(<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Тотошку&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>)
Сейчас будем кормить крокодила Тотошку
 =&gt; <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>BuiltInConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="BuiltInConstant">nil</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">006</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> feed_crocodile
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Variable<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Variable">ArgumentError</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>: wrong number of arguments (<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">0</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">for</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">1</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>)
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">007</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>feed_crocodile<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>(<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Тотошку&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>, <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;бананами&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>)
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Variable<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Variable">ArgumentError</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>: wrong number of arguments (<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">2</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">for</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">1</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>)
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">008</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>feed_crocodile<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>(<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Тотошку&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>) { |&lt;<span class="Variable">span</span> <span class="Variable">class</span>="<span class="Variable">Variable</span>"&gt;<span class="Variable">name</span>&lt;/<span class="Variable">span</span>&gt;| puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String"><span class="String">#{</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>name<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String">}</span></span>&lt;/span&gt;&lt;/span&gt; кормят мясом!&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> }
Сейчас будем кормить крокодила Тотошку
Тотошку кормят мясом!
 =&gt; <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>BuiltInConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="BuiltInConstant">nil</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">009</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>feed_crocodile<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>(<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Тотошку&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>) { puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Два дня не ел, бедняга&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> }
Сейчас будем кормить крокодила Тотошку
Два дня не ел, бедняга
 =&gt; <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>BuiltInConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="BuiltInConstant">nil</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">010</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>feed_crocodile<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>(<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Тотошку&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>) { |&lt;<span class="Variable">span</span> <span class="Variable">class</span>="<span class="Variable">Variable</span>"&gt;<span class="Variable">name</span>&lt;/<span class="Variable">span</span>&gt;, &lt;<span class="Variable">span</span> <span class="Variable">class</span>="<span class="Variable">Variable</span>"&gt;<span class="Variable">food</span>&lt;/<span class="Variable">span</span>&gt;| puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String"><span class="String">#{</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>name<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String">}</span></span>&lt;/span&gt;&lt;/span&gt; кормят &lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String"><span class="String">#{</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>food<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String">}</span></span>&lt;/span&gt;&lt;/span&gt;!&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> }
Сейчас будем кормить крокодила Тотошку
Тотошку кормят <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;</span>!<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
 =&gt; <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>BuiltInConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="BuiltInConstant">nil</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
</code></pre>

      <aside><p>Всё внимание на второй и третий вызов с блоком: ошибок нет!</p>

        <p>Во втором мы вообще забыли указать список аргументов. Переданное в блок <code>name</code>
  считаем выброшенным в пропасть.</p>

        <p>В третьем мы объявили лишний аргумент. В этом случае Ruby создает локальную
  переменную <code>food</code> и присваивает ей значение <code>nil</code>, которое при
  интерполяции превращается в пустую строку. Поэтому последний вывод выглядит
  так: «кормят пробел восклицательный знак».</p>
      </aside>
</div>

  </section></section><section><h2>Нечто, похожее на блоки</h2>

  <p>Существует целый ряд операторов в Ruby, в которых используются ключевые слова
<code>do end</code> — это циклы. Хочется предостеречь от возможного заблуждения:
в циклах <em>не используются</em> блоки, <code>do end</code> являются неотъемлемой составляющей
конструкции этих операторов.</p>

  <p>Во-первых, хотя и пишем</p>

  <pre><code class="slush_poppies"><span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">loop</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">do</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
  puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Hello&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">end</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
</code></pre>

  <p>но нельзя писать</p>

  <pre><code class="slush_poppies"><span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">loop</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> { puts <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Hello&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> }
</code></pre>

  <p>Во-вторых, операторы циклов не создают локальную область видимости!</p>

  <pre><code class="slush_poppies"><span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">001</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> x <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;=</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">0</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
 =&gt; <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">0</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">002</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">while</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> x <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span>&gt;<span class="Operators">&lt;&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">1</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">do</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">003</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>   inside <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;=</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Я внутри?&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">004</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Number">?&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>   x <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;=</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> x <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Operators">+</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">1</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">005</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Number">?&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">end</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
 =&gt; <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>BuiltInConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="BuiltInConstant">nil</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">006</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> puts inside
Я внутри?
 =&gt; <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>BuiltInConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="BuiltInConstant">nil</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
</code></pre>
</section><section><h2>Использование блоков в повседневном коде</h2>

  <section><h3>Итераторы</h3>

    <p>Трудно себе представить рабочий код на Ruby без применения итераторов. Вся работа
с массивами, хешами и другими объектами, способными себя перечислять, построена на итераторах,
что намного удобнее использования циклов.</p>

    <p>Итератор — это метод, который некоторое количество раз
вызывает блок и может передавать в него данные по определенному алгоритму.
Итератор без блока — как туловище без головы: он знает, с чем ему нужно
работать, но абсолютно без понятия, <em>что</em> ему нужно с этим делать.</p>

    <p>Самый известный итератор, <code>each</code>, последовательно передает в блок все
элементы объекта, от имени которого вызван метод.</p>

    <pre><code class="slush_poppies"><span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">001</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> [<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">1</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>, <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">2</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>, <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">3</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>].<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>each<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> { |&lt;<span class="Variable">span</span> <span class="Variable">class</span>="<span class="Variable">Variable</span>"&gt;<span class="Variable">i</span>&lt;/<span class="Variable">span</span>&gt;| puts i <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Operators">+</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">2</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> }
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">3</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">4</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">5</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
 =&gt; <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>BuiltInConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="BuiltInConstant">nil</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
</code></pre>
  </section><section><h3>Обёртывание кода</h3>

    <p>Случается, что какой-то алгоритм состоит из множества типовых операций, между
которыми необходимо выполнять уникальную. Если вы часто едите бутерброды, то
знаете, что хлеб придется нарезать каждый раз, отличие только в начинке.</p>

    <p>Чтобы скрыть рутинные операции, связанные с покупкой хлеба, поиском ножа и
нарезанием, вы оставляете их в методе, а подготовку колбасы — единственную уникальную
операцию — предоставляете блоку, и только он будет у вас постоянно на виду. Это
здорово повышает читаемость кода.</p>

    <p>Классическим примером является работа с файлами с помощью системного
класса <code>File</code>. Метод <code>open</code> этого класса берет на себя заботу
о создании дескриптора открытого файла и — главное — корректном
закрытии файла в конце, пользователю же остается только самое важное —
считывание и обработка данных, находящихся в файле.</p>

    <pre><code class="slush_poppies"><span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">001</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> first_line <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;=</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>LibraryClassType<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Variable">File</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>.<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>open<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>(<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;some.txt&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>) <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">do </span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Operators">|</span><span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Variable<span class="String">"</span></span><span class="Operators">&gt;</span>file<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Operators">|</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">002</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>   file.<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>readline<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">003</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Number">?&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;&gt;</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">end</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
</code></pre>

    <p>Бывает и обратная ситуация: когда вы хотите выполнить что-то
перед или после постороннего метода. Для этого создается служебный
метод, в котором будет выполняться это «что-то» и происходить вызов блока. Теперь
достаточно передать посторонний метод в блоке вашему служебному методу.</p>

    <p>Классическим примером является измерение времени выполнения метода:</p>

    <pre><code class="slush_poppies"><span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span>def<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>measure_time<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Comment<span class="String">"</span></span><span class="Operators">&gt;</span>  <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Comment<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Comment"><span class="Comment">#</span>&lt;/span&gt; запустить таймер&lt;/span&gt;</span>
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Comment<span class="String">"</span></span><span class="Operators">&gt;</span>  <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Comment<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Comment"><span class="Comment">#</span>&lt;/span&gt; ...&lt;/span&gt;</span>

  <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">yield</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>

<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Comment<span class="String">"</span></span><span class="Operators">&gt;</span>  <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Comment<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Comment"><span class="Comment">#</span>&lt;/span&gt; остановить таймер и вывести потраченное время&lt;/span&gt;</span>
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Comment<span class="String">"</span></span><span class="Operators">&gt;</span>  <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Comment<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Comment"><span class="Comment">#</span>&lt;/span&gt; ...&lt;/span&gt;</span>
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">end</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>

measure_time { make_coffee }
</code></pre>
  </section><section><h3>DSL</h3>

    <p>Если вы едите бутерброды каждый день, вполне возможно, вам захочется
написать для этого целую библиотеку. В ней будет много-много методов, вроде
«намазать», «нарезать» и «открыть», каждый из которых будет представлять собой
низкоуровневый код на обычном Ruby. С этим кодом вполне можно работать и напрямую, но
чтобы разобраться в алгоритме работы в контексте поставленной задачи, нужно
напрячься. Другое дело — такая вот инструкция, всё строго по делу:</p>

    <pre><code class="slush_poppies">slices <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;=</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> cut bread { by <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">3</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>, <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>UserDefinedConstant<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>UserDefinedConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>slices<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> }
open caviar_can, <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>UserDefinedConstant<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>UserDefinedConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>with<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> =&gt; <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>UserDefinedConstant<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>UserDefinedConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>can_opener<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">do </span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Operators">|</span><span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Variable<span class="String">"</span></span><span class="Operators">&gt;</span>contents<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Operators">|</span>
  slices.<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>each<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> { |&lt;<span class="Variable">span</span> <span class="Variable">class</span>="<span class="Variable">Variable</span>"&gt;<span class="Variable">slice</span>&lt;/<span class="Variable">span</span>&gt;| slice.<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>spread<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>UserDefinedConstant<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>UserDefinedConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>with<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> =&gt; contents.<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>about<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>(<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">'</span>&lt;/span&gt;20%&lt;span class="String"&gt;<span class="String">'</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>) }
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">end</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
</code></pre>

    <p>Ваш код остался синтаксически правильной последовательностью методов и блоков
Ruby, но с точки зрения решения поставленной задачи — это уже надстройка над
языком или <abbr title="Domain specific language">DSL</abbr>, а методы —
операторы нового языка. Программы,
написанные с помощью хорошо продуманного DSL, легко читать, они говорят сами за себя (отпадает
необходимость в комментировании кода). Но надо понимать, что для каждой
задачи потребуется свой DSL, на изучение/создание которого необходимо время.</p>

    <p>Классическим примером DSL является фреймворк для тестирования <a href="http://www.relishapp.com/rspec/rspec-core">RSpec</a>.</p>
  </section><section><h3>Конструктор объекта</h3>

    <p>Иногда конструктор объекта должен принять столько различных параметров, что
передача их через список аргументов уже неудобна: легко запутаться, что чему
мы присваиваем. Одним из вариантов решения этой проблемы является использование
хеша {название параметра =&gt; значение параметра, …}.</p>

    <p>А можно использовать технику барона Мюнхгаузена: передать в блок конструктора
самого себя, т. е. только что созданный объект, которому уже присваивать нужные
параметры.</p>

    <pre><code class="slush_poppies"><span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">class</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Variable">Gladiator</span>
  <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">attr_accessor</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>UserDefinedConstant<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>UserDefinedConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>name<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>, <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>UserDefinedConstant<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>UserDefinedConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>rank<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>, <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>UserDefinedConstant<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>UserDefinedConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>height<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>, <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>UserDefinedConstant<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>UserDefinedConstant<span class="String">"</span></span><span class="Operators">&gt;</span><span class="UserDefinedConstant"><span class="UserDefinedConstant">:</span>&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>weight<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>

  <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span>def<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">initialize</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
    <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">yield</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>(self)
  <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">end</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>

<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Comment<span class="String">"</span></span><span class="Operators">&gt;</span>  <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Comment<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Comment"><span class="Comment">#</span>&lt;/span&gt;...&lt;/span&gt;</span>
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">end</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>

spartak <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;=</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>LibraryClassType<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Variable">Gladiator</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>.<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">new</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">do </span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Operators">|</span><span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Variable<span class="String">"</span></span><span class="Operators">&gt;</span>his<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span><span class="Operators">|</span>
  his.<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>name<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;=</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span>&gt;<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>String<span class="String">"</span></span><span class="Operators">&gt;</span><span class="String"><span class="String">"</span>&lt;/span&gt;Спартак&lt;span class=<span class="String">"</span></span><span class="Variable">String</span><span class="String"><span class="String">"</span>&gt;<span class="String">"</span></span><span class="Operators">&lt;</span><span class="Operators">/</span>span&gt;<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
  his.<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>FunctionName<span class="String">"</span></span><span class="Operators">&gt;</span>weight<span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Operators<span class="String">"</span></span><span class="Operators">&gt;=</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span> <span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Number<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Number">91</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
<span class="Operators">&lt;</span>span <span class="Keyword">class</span><span class="Operators">=</span><span class="String"><span class="String">"</span>Keyword<span class="String">"</span></span><span class="Operators">&gt;</span><span class="Keyword">end</span><span class="Operators">&lt;</span><span class="Operators">/</span>span<span class="Operators">&gt;</span>
</code></pre>
  </section></section></article>
</div></body>
</html>
